<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>‡∏ï‡∏±‡∏ß‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ + ‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏° (TikTok ‚Ä¢ Shopee ‚Ä¢ Lazada)</title>
<style>
  :root{--bg:#0f172a;--card:#111827;--muted:#94a3b8;--text:#e5e7eb;--accent:#22d3ee;--accent-2:#a78bfa;--ok:#34d399;--warn:#fbbf24;--danger:#fb7185;--radius:16px}
  *{box-sizing:border-box} body{margin:0;background:linear-gradient(135deg,#0b1220,#0f172a 60%,#111827);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,"Noto Sans Thai",sans-serif}
  header{padding:24px 18px 4px;text-align:center}
  h1{margin:0;font-size:1.25rem} .sub{color:var(--muted);font-size:.92rem}
  .wrap{max-width:1000px;margin:8px auto 40px;padding:10px;display:grid;gap:14px}
  .card{background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.015));border:1px solid rgba(148,163,184,.18);border-radius:var(--radius);padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
  .grid{display:grid;gap:10px}.g2{grid-template-columns:1fr 1fr}.g3{grid-template-columns:repeat(3,1fr)}@media(max-width:860px){.g2,.g3{grid-template-columns:1fr}}
  label{font-size:.9rem;color:var(--muted)}
  .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .seg{display:inline-flex;gap:4px;padding:4px;background:#0b1020;border:1px solid rgba(148,163,184,.18);border-radius:10px}
  .seg button{border:0;padding:8px 12px;border-radius:8px;background:transparent;color:var(--text);cursor:pointer}
  .seg button[aria-pressed="true"]{background:linear-gradient(180deg,rgba(34,211,238,.15),rgba(167,139,250,.15))}
  input,select{width:100%;padding:12px 12px;border-radius:10px;border:1px solid rgba(148,163,184,.25);background:rgba(2,6,23,.6);color:var(--text);font-size:1rem;outline:none}
  input:focus,select:focus{border-color:transparent;box-shadow:0 0 0 3px rgba(167,139,250,.35)}
  .hint{font-size:.8rem;color:var(--muted)}
  .pill{display:inline-flex;gap:8px;padding:6px 10px;border-radius:999px;border:1px dashed rgba(148,163,184,.35);color:var(--muted);font-size:.85rem}
  .result .big{font-size:1.6rem;font-weight:700}
  .mono{font-variant-numeric:tabular-nums;font-family:ui-monospace,Menlo,Consolas,monospace}
  .muted{color:var(--muted)} .hr{height:1px;background:linear-gradient(90deg,transparent,rgba(148,163,184,.35),transparent);margin:6px 0 6px}
  .btn{border:0;padding:10px 12px;border-radius:10px;color:#0b1020;font-weight:700;background:linear-gradient(90deg,var(--accent),var(--accent-2));cursor:pointer}
  footer{color:var(--muted);text-align:center;padding:14px 0 26px;font-size:.85rem}
</style>
</head>
<body>
<header>
  <h1>‡∏ï‡∏±‡∏ß‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ + ‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏° üßÆ</h1>
  <div class="sub">‡∏ï‡∏±‡πâ‡∏á ‚Äú‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‚Äù ‡πÉ‡∏´‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î & ‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏° = ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô + ‡∏Å‡∏≥‡πÑ‡∏£</div>
</header>

<div class="wrap">
  <!-- A. ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô -->
  <section class="card grid g2">
    <div>
      <label>‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (‡∏ö‡∏≤‡∏ó)</label>
      <input id="cost" type="number" inputmode="decimal" placeholder="‡πÄ‡∏ä‡πà‡∏ô 120" min="0" step="0.01" />
    </div>
    <div>
      <div class="row" style="justify-content:space-between">
        <label>‡∏Å‡∏≥‡πÑ‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</label>
        <div class="seg" role="group">
          <button id="g_abs" aria-pressed="true">‡∏ö‡∏≤‡∏ó</button>
          <button id="g_pct" aria-pressed="false">% ‡∏Ç‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</button>
        </div>
      </div>
      <input id="profit" type="number" inputmode="decimal" placeholder="‡πÄ‡∏ä‡πà‡∏ô 30 (‡∏ö‡∏≤‡∏ó) ‡∏´‡∏£‡∏∑‡∏≠ 20 (%)" min="0" step="0.01" />
      <div class="row" style="gap:6px;margin-top:6px">
        <button class="btn" id="quick10" type="button">‡∏Å‡∏≥‡πÑ‡∏£ 10%</button>
        <button class="btn" id="quick20" type="button">‡∏Å‡∏≥‡πÑ‡∏£ 20%</button>
        <button class="btn" id="quick30" type="button">‡∏Å‡∏≥‡πÑ‡∏£ 30%</button>
      </div>
    </div>
  </section>

  <!-- B. ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏™‡∏≠‡∏á‡∏ä‡∏±‡πâ‡∏ô -->
  <section class="card grid">
    <div class="row" style="justify-content:space-between">
      <h3 style="margin:0">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</h3>
      <div class="seg" role="group">
        <button id="order_store_first" aria-pressed="true">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô ‚Üí ‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°</button>
        <button id="order_platform_first" aria-pressed="false">‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡πà‡∏≠‡∏ô ‚Üí ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</button>
      </div>
    </div>

    <div class="grid g3">
      <div>
        <label>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ (%)</label>
        <input id="store_pct" type="number" inputmode="decimal" placeholder="‡πÄ‡∏ä‡πà‡∏ô 10" min="0" step="0.01" />
        <div class="hint">‡πÉ‡∏™‡πà 0 ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ</div>
      </div>
      <div>
        <label>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏Ñ‡∏á‡∏ó‡∏µ‡πà, ‡∏ö‡∏≤‡∏ó)</label>
        <input id="store_fix" type="number" inputmode="decimal" placeholder="‡πÄ‡∏ä‡πà‡∏ô 20" min="0" step="0.01" />
      </div>
      <div>
        <label>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏° (%)</label>
        <input id="plat_pct" type="number" inputmode="decimal" placeholder="‡πÄ‡∏ä‡πà‡∏ô 5" min="0" step="0.01" />
      </div>
    </div>

    <div class="grid g3">
      <div>
        <label>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏° (‡∏Ñ‡∏á‡∏ó‡∏µ‡πà, ‡∏ö‡∏≤‡∏ó)</label>
        <input id="plat_fix" type="number" inputmode="decimal" placeholder="‡πÄ‡∏ä‡πà‡∏ô 15" min="0" step="0.01" />
      </div>
      <div>
        <label>‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</label>
        <input id="dec" type="number" min="0" max="4" step="1" value="2" />
      </div>
      <div>
        <label>‡∏õ‡∏±‡∏î‡πÄ‡∏®‡∏©‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏±‡πâ‡∏á (‡∏ö‡∏≤‡∏ó)</label>
        <input id="roundTo" type="number" min="0" step="1" value="1" />
      </div>
    </div>
  </section>

  <!-- C. ‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏° -->
  <section class="card grid">
    <div class="row" style="justify-content:space-between;align-items:center">
      <h3 style="margin:0">‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏° (‡πÑ‡∏ó‡∏¢) </h3>
      <div class="row">
        <label class="muted">‡∏û‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï:</label>
        <select id="preset">
          <option value="manual">‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å/‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏≠‡∏á ‚Äî</option>
          <option value="tiktok">TikTok Shop TH (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï 1 ‡∏°.‡∏Ñ. 2025 ‡∏°‡∏µ‡∏õ‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°)</option>
          <option value="shopee">Shopee TH (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)</option>
          <option value="lazada">Lazada TH (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)</option>
        </select>
      </div>
    </div>

    <div class="grid g3">
      <div>
        <label>‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏° (%)</label>
        <input id="fee_comm_pct" type="number" inputmode="decimal" placeholder="‡πÉ‡∏™‡πà‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà" min="0" step="0.01" />
        <div class="hint">‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏´‡∏°‡∏ß‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡πâ‡∏≤‡∏ô (Mall/‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ)</div>
      </div>
      <div>
        <label>‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô/‡∏ó‡∏£‡∏≤‡∏ô‡πÅ‡∏ã‡∏Å‡∏ä‡∏±‡∏ô (%)</label>
        <input id="fee_pay_pct" type="number" inputmode="decimal" placeholder="‡πÄ‡∏ä‡πà‡∏ô 2 ~ 3.21" min="0" step="0.01" />
        <div class="hint">‡πÄ‡∏ä‡πà‡∏ô Shopee TH ‡∏°‡∏±‡∏Å‡∏≠‡πâ‡∏≤‡∏á 3.21% ‡∏£‡∏ß‡∏° VAT</div>
      </div>
      <div>
        <label>‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°‡∏Ñ‡∏á‡∏ó‡∏µ‡πà (‡∏ö‡∏≤‡∏ó)</label>
        <input id="fee_fix" type="number" inputmode="decimal" placeholder="‡πÄ‡∏ä‡πà‡∏ô 0" min="0" step="0.01" />
      </div>
    </div>

    <div class="grid g2">
      <div>
        <label>‡∏ê‡∏≤‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ‚Äú‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô‚Äù</label>
        <select id="base_comm">
          <option value="store_only">‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</option>
          <option value="all_after">‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
          <option value="list">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏±‡πâ‡∏á (‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î)</option>
        </select>
        <div class="hint">‡∏õ‡∏Å‡∏ï‡∏¥‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô‡∏Ñ‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏•‡∏±‡∏á ‚Äú‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‚Äù (‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°)</div>
      </div>
      <div>
        <label>‡∏ê‡∏≤‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ‚Äú‡∏Ñ‡πà‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‚Äù</label>
        <select id="base_pay">
          <option value="final">‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡πà‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
          <option value="store_only">‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</option>
          <option value="list">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏±‡πâ‡∏á (‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î)</option>
        </select>
      </div>
    </div>
    <div class="hint">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏¢‡πà‡∏≠‡∏¢‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î/‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç ‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡πÉ‡∏ô Seller Center ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏™‡∏°‡∏≠</div>
  </section>

  <!-- D. ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå -->
  <section class="card grid result">
    <div class="row" style="justify-content:space-between"><span class="muted">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ç‡∏≤‡∏¢ (‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î)</span><span id="listPrice" class="big mono">‚Äî</span></div>
    <div class="hr"></div>
    <div class="row" style="justify-content:space-between"><span class="muted">‡∏¢‡∏≠‡∏î‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡πà‡∏≤‡∏¢)</span><span id="finalPrice" class="big mono">‚Äî</span></div>
    <div class="row" style="justify-content:space-between"><span class="muted">‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°‡∏£‡∏ß‡∏° (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì)</span><span id="feeTotal" class="mono">‚Äî</span></div>
    <div class="row" style="justify-content:space-between"><span class="muted">‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°)</span><span id="net" class="big mono">‚Äî</span></div>
    <div class="row" style="justify-content:space-between"><span class="muted">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ = ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô + ‡∏Å‡∏≥‡πÑ‡∏£</span><span id="target" class="mono">‚Äî</span></div>
    <div class="hr"></div>
    <div class="grid g2">
      <div class="grid">
        <strong>‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</strong>
        <div class="row" style="justify-content:space-between"><span class="muted">‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 1</span><span id="step1" class="mono">‚Äî</span></div>
        <div class="row" style="justify-content:space-between"><span class="muted">‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà 2</span><span id="step2" class="mono">‚Äî</span></div>
      </div>
      <div class="grid">
        <strong>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</strong>
        <div id="note" class="muted">‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</div>
      </div>
    </div>
    <div class="row" style="justify-content:flex-end;gap:8px"><button class="btn" id="copyBtn" type="button">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏±‡πâ‡∏á</button></div>
  </section>
</div>

<footer>‡∏™‡∏π‡∏ï‡∏£‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤ ‚Äú‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‚Äù ‡∏ñ‡∏π‡∏Å‡∏´‡∏±‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î % ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡∏±‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏•‡∏±‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤/‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏° ‡πÑ‡∏î‡πâ</footer>

<script>
(function(){
  const $ = id=>document.getElementById(id);
  const els = {
    cost:$('cost'), profit:$('profit'), gAbs:$('g_abs'), gPct:$('g_pct'),
    storePct:$('store_pct'), storeFix:$('store_fix'),
    platPct:$('plat_pct'), platFix:$('plat_fix'),
    orderStoreFirst:$('order_store_first'), orderPlatFirst:$('order_platform_first'),
    dec:$('dec'), roundTo:$('roundTo'),
    // fees
    preset:$('preset'), feeComm:$('fee_comm_pct'), feePay:$('fee_pay_pct'), feeFix:$('fee_fix'),
    baseComm:$('base_comm'), basePay:$('base_pay'),
    // output
    listPrice:$('listPrice'), finalPrice:$('finalPrice'), feeTotal:$('feeTotal'),
    net:$('net'), target:$('target'), step1:$('step1'), step2:$('step2'),
    note:$('note'), copyBtn:$('copyBtn'),
    quick10:$('quick10'), quick20:$('quick20'), quick30:$('quick30')
  };

  // helpers
  const toNum = v => {
    const n = parseFloat((v??'').toString().replace(',', '.'));
    return isFinite(n) ? n : 0;
  };
  const money = (n, dec=2)=> isFinite(n) ? n.toLocaleString('th-TH',{minimumFractionDigits:dec, maximumFractionDigits:dec}) : '‚Äî';
  const setPressed = (btn, on)=> btn.setAttribute('aria-pressed', on?'true':'false');

  // profit mode
  els.gAbs.onclick = ()=>{ setPressed(els.gAbs,true); setPressed(els.gPct,false); calc(); };
  els.gPct.onclick = ()=>{ setPressed(els.gAbs,false); setPressed(els.gPct,true); calc(); };

  // order
  els.orderStoreFirst.onclick = ()=>{ setPressed(els.orderStoreFirst,true); setPressed(els.orderPlatFirst,false); calc(); };
  els.orderPlatFirst.onclick  = ()=>{ setPressed(els.orderStoreFirst,false); setPressed(els.orderPlatFirst,true); calc(); };

  // quick profit %
  els.quick10.onclick=()=>{ setPressed(els.gAbs,false); setPressed(els.gPct,true); els.profit.value=10; calc(); };
  els.quick20.onclick=()=>{ setPressed(els.gAbs,false); setPressed(els.gPct,true); els.profit.value=20; calc(); };
  els.quick30.onclick=()=>{ setPressed(els.gAbs,false); setPressed(els.gPct,true); els.profit.value=30; calc(); };

  // presets (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á)
  els.preset.onchange = ()=>{
    switch(els.preset.value){
      case 'tiktok':
        // ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà 1 ‡∏°.‡∏Ñ. 2025 (‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î)
        els.feeComm.value = ''; // ‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î/‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡πâ‡∏≤‡∏ô
        els.feePay.value  = ''; // ‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô
        els.feeFix.value  = 0;
        els.baseComm.value= 'store_only';
        els.basePay.value = 'final';
        break;
      case 'shopee':
        // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÑ‡∏ó‡∏¢: ‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô (‡∏ä‡πà‡∏ß‡∏á‡∏Å‡∏ß‡πâ‡∏≤‡∏á) + ‡∏Ñ‡πà‡∏≤‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏° 3.21% ‡∏£‡∏ß‡∏° VAT
        els.feeComm.value = 6;   // ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏´‡∏°‡∏ß‡∏î (5‚Äì8% non-Mall / 5‚Äì11% Mall)
        els.feePay.value  = 3.21; // ‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°‡πÑ‡∏ó‡∏¢ (‡∏£‡∏ß‡∏° VAT) ‚Äì ‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ
        els.feeFix.value  = 0;
        els.baseComm.value= 'store_only';
        els.basePay.value = 'final';
        break;
      case 'lazada':
        // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÑ‡∏ó‡∏¢: ‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô‡∏ä‡πà‡∏ß‡∏á 3‚Äì7% / ‡∏Ñ‡πà‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏≤‡∏ß 2% (‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞)
        els.feeComm.value = 5;
        els.feePay.value  = 2;
        els.feeFix.value  = 0;
        els.baseComm.value= 'store_only';
        els.basePay.value = 'final';
        break;
      default:
        els.feeComm.value=''; els.feePay.value=''; els.feeFix.value=0;
        els.baseComm.value='store_only'; els.basePay.value='final';
    }
    calc();
  };

  // recalc on input
  document.querySelectorAll('input,select').forEach(i=> i.addEventListener('input', calc));

  function deriveLayer(P, fix, pct){
    // (P - fix) * (1 - pct)  => a*P + b
    const a = (1 - pct);
    const b = - (1 - pct) * fix;
    return {a,b, val: (P - fix) * a};
  }

  function baseExpr(type, P, store, plat, orderStoreFirst){
    // ‡∏Ñ‡∏∑‡∏ô a,b ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
    // store_only = (P - store.fix)*(1-store.pct)
    // all_after  = apply both layers in selected order
    // list       = P
    if (type==='list') return {a:1, b:0};
    if (type==='store_only'){
      const a = (1 - store.pct), b = - (1 - store.pct) * store.fix;
      return {a,b};
    }
    // all_after
    if (orderStoreFirst){
      const s = deriveLayer(0, store.fix, store.pct); // use coefficients only
      const p = {a:(1 - plat.pct), b: - (1 - plat.pct) * plat.fix};
      // compose: p( s(P) ) = (p.a)*(s.a)*P + (p.a*s.b + p.b)
      return { a: p.a * s.a, b: p.a * s.b + p.b };
    }else{
      const p = deriveLayer(0, plat.fix, plat.pct);
      const s = {a:(1 - store.pct), b: - (1 - store.pct) * store.fix};
      return { a: s.a * p.a, b: s.a * p.b + s.b };
    }
  }

  function calc(){
    const dec   = Math.max(0, Math.min(4, toNum(els.dec.value)));
    const rndTo = Math.max(1, toNum(els.roundTo.value));

    const cost = Math.max(0, toNum(els.cost.value));
    const pval = Math.max(0, toNum(els.profit.value));
    const profitAbs = els.gPct.getAttribute('aria-pressed')==='true' ? cost*(pval/100) : pval;
    const target = cost + profitAbs;

    // discounts
    const store = { pct: Math.max(0, toNum(els.storePct.value)/100), fix: Math.max(0, toNum(els.storeFix.value)) };
    const plat  = { pct: Math.max(0, toNum(els.platPct.value)/100),  fix: Math.max(0, toNum(els.platFix.value))  };
    const orderStoreFirst = els.orderStoreFirst.getAttribute('aria-pressed')==='true';

    // build S2 = a2*P + b2  (‡∏¢‡∏≠‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡πà‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏±‡∏Å‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°)
    const first = orderStoreFirst ? store : plat;
    const second= orderStoreFirst ? plat  : store;

    const A1 = (1 - first.pct), B1 = - (1 - first.pct) * first.fix; // S1 = A1*P + B1
    const A2 = (1 - second.pct), B2 = - (1 - second.pct) * second.fix;

    const a2 = A2 * A1;
    const b2 = A2 * B1 + B2;

    // fee bases
    const commBase = baseExpr(els.baseComm.value, 0, store, plat, orderStoreFirst); // aC,bC
    const payBase  = baseExpr(els.basePay.value,  0, store, plat, orderStoreFirst); // aT,bT

    const cPct = Math.max(0, toNum(els.feeComm.value)/100);
    const tPct = Math.max(0, toNum(els.feePay.value)/100);
    const fFix = Math.max(0, toNum(els.feeFix.value));

    // solve for P: Net = (a2 - cPct*aC - tPct*aT)*P + (b2 - cPct*bC - tPct*bT - fFix) = target
    const denom = (a2 - cPct*commBase.a - tPct*payBase.a);
    if (denom <= 0){
      showImpossible(dec, target, "‡∏û‡∏≤‡∏£‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡∏™‡∏°‡∏Å‡∏≤‡∏£ (‡∏ï‡∏±‡∏ß‡∏´‡∏≤‡∏£ ‚â§ 0) ‚Äî ‡∏•‡∏î % ‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°/‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏•‡∏á");
      return;
    }
    let P = (target - (b2 - cPct*commBase.b - tPct*payBase.b - fFix)) / denom;

    // ‡∏õ‡∏±‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡πÉ‡∏´‡πâ‡∏ô‡πà‡∏≤‡πÉ‡∏ä‡πâ
    if (rndTo > 0) P = Math.ceil(P / rndTo) * rndTo;

    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏õ‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
    const S1 = A1*P + B1;
    const S2 = a2*P + b2; // before fees (‡∏¢‡∏≠‡∏î‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡πà‡∏≤‡∏¢)
    const baseC = commBase.a*P + commBase.b;
    const baseT = payBase.a*P + payBase.b;

    const feeC = cPct * baseC;
    const feeT = tPct * baseT;
    const feeTotal = feeC + feeT + fFix;
    const net = S2 - feeTotal;

    // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
    els.listPrice.textContent  = money(P, dec) + " ‡∏ø";
    els.finalPrice.textContent = money(S2, dec) + " ‡∏ø";
    els.feeTotal.textContent   = money(feeTotal, dec) + " ‡∏ø";
    els.net.textContent        = money(net, dec) + " ‡∏ø";
    els.target.textContent     = money(target, dec) + " ‡∏ø";
    els.step1.textContent      = money(S1, dec) + " ‡∏ø";
    els.step2.textContent      = money(S2, dec) + " ‡∏ø";

    // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏
    const diff = Math.abs(net - target);
    els.note.textContent = diff <= Math.max(0.01, target*0.001)
      ? "‚úì ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ ‚âà ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£"
      : "‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤ % ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î/‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡∏∏‡∏ì";

    // copy
    els.copyBtn.onclick = async ()=>{
      try{
        await navigator.clipboard.writeText(P.toFixed(dec));
        els.copyBtn.textContent = "‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‚úì";
        setTimeout(()=> els.copyBtn.textContent="‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏±‡πâ‡∏á", 1100);
      }catch(e){ alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: " + e.message); }
    };
  }

  function showImpossible(dec, target, reason){
    els.listPrice.textContent  = "‚Äî";
    els.finalPrice.textContent = "‚Äî";
    els.feeTotal.textContent   = "‚Äî";
    els.net.textContent        = "‚Äî";
    els.step1.textContent      = "‚Äî";
    els.step2.textContent      = "‚Äî";
    els.target.textContent     = money(target, dec) + " ‡∏ø";
    els.note.textContent       = "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏î‡πâ: " + reason;
  }

  calc();
})();
</script>
</body>
</html>
